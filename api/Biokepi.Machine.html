<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Biokepi.EDSL.html">
<link rel="next" href="Biokepi.Setup.html">
<link rel="Up" href="Biokepi.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of extensions" rel=Appendix href="index_extensions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Biokepi_run_environment" rel="Chapter" href="Biokepi_run_environment.html">
<link title="Biokepi_environment_setup" rel="Chapter" href="Biokepi_environment_setup.html">
<link title="Biokepi_bfx_tools" rel="Chapter" href="Biokepi_bfx_tools.html">
<link title="Biokepi_pipeline_edsl" rel="Chapter" href="Biokepi_pipeline_edsl.html">
<link title="All_downloads" rel="Chapter" href="All_downloads.html">
<link title="Main" rel="Chapter" href="Main.html">
<link title="Ttfi_pipeline" rel="Chapter" href="Ttfi_pipeline.html">
<link title="Biokepi" rel="Chapter" href="Biokepi.html"><title>Biokepi API : Biokepi.Machine</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Biokepi.EDSL.html" title="Biokepi.EDSL">Previous</a>
&nbsp;<a class="up" href="Biokepi.html" title="Biokepi">Up</a>
&nbsp;<a class="post" href="Biokepi.Setup.html" title="Biokepi.Setup">Next</a>
</div>
<h1>Module <a href="type_Biokepi.Machine.html">Biokepi.Machine</a> (<a href="code_Biokepi.Machine.html">.ml</a>)</h1>

<pre><span class="keyword">module</span> Machine: <code class="type"><a href="Biokepi_run_environment.Machine.html">Biokepi_run_environment.Machine</a></code></pre><div class="info module top">
The description of the computing infrastructure used in Biokepi.
<p>

    The <a href="Biokepi_run_environment.Machine.html"><code class="code"><span class="constructor">Biokepi_run_environment</span>.<span class="constructor">Machine</span></code></a> provides an API to interact with the
    computing environment, it is used by all the programs in <a href="Biokepi.Tools.html"><code class="code"><span class="constructor">Biokepi</span>.<span class="constructor">Tools</span></code></a>
    (and hence by the <a href="Biokepi.EDSL.html"><code class="code"><span class="constructor">Biokepi</span>.<span class="constructor">EDSL</span></code></a> through the <a href="Biokepi.EDSL.Compile.To_workflow.html"><code class="code"><span class="constructor">Biokepi</span>.<span class="constructor">EDSL</span>.<span class="constructor">Compile</span>.<span class="constructor">To_workflow</span></code></a>
    compiler). It is used to:
<p>
<ul>
<li>interact with cluster schedulers, by wrapping <code class="code"><span class="constructor">Ketrew</span></code> build-processes
    (YARN, LSF, etc.);</li>
<li>provide reference data (genomes, databases, etc.);</li>
<li>ensure the software used by the workflows is available for use.</li>
</ul>

    The user of the library has to provide (at least) one <code class="code"><span class="constructor">Biokepi</span>.<span class="constructor">Machine</span>.t</code>
    instance to run the workflows.
    The <a href="Biokepi.Setup.html"><code class="code"><span class="constructor">Biokepi</span>.<span class="constructor">Setup</span></code></a> module provides an extensive set of defaults to
    simplify this.<br>
</div>
<hr width="100%">

<pre><span class="keyword">module</span> <a href="Biokepi_run_environment.Machine.Tool.html">Tool</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Biokepi_run_environment.Machine.Tool.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>
<pre><span class="keyword">module</span> <a href="Biokepi_run_environment.Machine.Make_fun.html">Make_fun</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Biokepi_run_environment.Machine.Make_fun.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Jobs in Biokepi ask the computing environment (defined below in
    <a href="Biokepi_run_environment.Machine.html"><code class="code"><span class="constructor">Biokepi_run_environment</span>.<span class="constructor">Machine</span></code></a>) for resources.
</div>

<pre><code><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> = {</code></pre><table class="typetable">
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.name">name</span>&nbsp;: <code class="type">string</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.host">host</span>&nbsp;: <code class="type">Common.KEDSL.Host.t</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.get_reference_genome">get_reference_genome</span>&nbsp;: <code class="type">string -> Reference_genome.t</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.toolkit">toolkit</span>&nbsp;: <code class="type"><a href="Biokepi_run_environment.Machine.Tool.Kit.html#TYPEt">Tool.Kit.t</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.run_program">run_program</span>&nbsp;: <code class="type"><a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a></code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.work_dir">work_dir</span>&nbsp;: <code class="type">string</code>;</code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code>&nbsp;&nbsp;</code></td>
<td align="left" valign="top" >
<code><span id="TYPEELTt.max_processors">max_processors</span>&nbsp;: <code class="type">int</code>;</code></td>

</tr></table>
}



<pre><span id="VALcreate"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.create.html">create</a></span> : <code class="type">host:Common.KEDSL.Host.t -><br>       get_reference_genome:(string -> Reference_genome.t) -><br>       toolkit:<a href="Biokepi_run_environment.Machine.Tool.Kit.html#TYPEt">Tool.Kit.t</a> -><br>       run_program:<a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a> -><br>       work_dir:string -><br>       max_processors:int -> string -> <a href="Biokepi_run_environment.Machine.html#TYPEt">t</a></code></pre>
<pre><span id="VALname"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.name.html">name</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -> string</code></pre>
<pre><span id="VALas_host"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.as_host.html">as_host</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -> Common.KEDSL.Host.t</code></pre>
<pre><span id="VALget_reference_genome"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.get_reference_genome.html">get_reference_genome</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -> string -> Reference_genome.t</code></pre>
<pre><span id="VALget_tool"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.get_tool.html">get_tool</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -><br>       <a href="Biokepi_run_environment.Machine.Tool.Definition.html#TYPEt">Tool.Definition.t</a> -><br>       <a href="Biokepi_run_environment.Machine.Tool.Kit.html#TYPEtool">Tool.Kit.tool</a></code></pre>
<pre><span id="VALrun_program"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.run_program.html">run_program</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -><br>       <a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a></code></pre>
<pre><span id="VALmax_processors"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.max_processors.html">max_processors</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -> int</code></pre><br>
Get the maximum number of processors that a single job can use in the
    <code class="code"><span class="constructor">Machine</span>.t</code> (i.e. usually the “number-of-threads” paramters of most tools)<br>

<pre><span id="VALquick_run_program"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.quick_run_program.html">quick_run_program</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -><br>       <a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a></code></pre>
<pre><span id="VALrun_stream_processor"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.run_stream_processor.html">run_stream_processor</a></span> : <code class="type">?self_ids:string list -><br>       <a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -><br>       <a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a></code></pre><div class="info ">
Run a program that does not use much memory and runs on one core.<br>
</div>

<pre><span id="VALrun_download_program"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.run_download_program.html">run_download_program</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -><br>       <a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a></code></pre><div class="info ">
Run a program that does not use much memory, runs on one core, and needs
    the internet.<br>
</div>

<pre><span id="VALrun_big_program"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.run_big_program.html">run_big_program</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -><br>       ?processors:int -><br>       ?self_ids:string list -> <a href="Biokepi_run_environment.Machine.Make_fun.html#TYPEt">Make_fun.t</a></code></pre>
<pre><span id="VALwork_dir"><span class="keyword">val</span> <a href="code_VALBiokepi_run_environment.Machine.work_dir.html">work_dir</a></span> : <code class="type"><a href="Biokepi_run_environment.Machine.html#TYPEt">t</a> -> string</code></pre></body></html>