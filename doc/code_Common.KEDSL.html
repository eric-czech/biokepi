<html><head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Bedtools" rel="Chapter" href="Bedtools.html">
<link title="Bwa" rel="Chapter" href="Bwa.html">
<link title="Common" rel="Chapter" href="Common.html">
<link title="Common_pipelines" rel="Chapter" href="Common_pipelines.html">
<link title="Cufflinks" rel="Chapter" href="Cufflinks.html">
<link title="Cycledash" rel="Chapter" href="Cycledash.html">
<link title="Gatk" rel="Chapter" href="Gatk.html">
<link title="Hisat" rel="Chapter" href="Hisat.html">
<link title="Mosaik" rel="Chapter" href="Mosaik.html">
<link title="Muse" rel="Chapter" href="Muse.html">
<link title="Mutect" rel="Chapter" href="Mutect.html">
<link title="Picard" rel="Chapter" href="Picard.html">
<link title="Pipeline" rel="Chapter" href="Pipeline.html">
<link title="Reference_genome" rel="Chapter" href="Reference_genome.html">
<link title="Region" rel="Chapter" href="Region.html">
<link title="Run_environment" rel="Chapter" href="Run_environment.html">
<link title="Samtools" rel="Chapter" href="Samtools.html">
<link title="Somaticsniper" rel="Chapter" href="Somaticsniper.html">
<link title="Star" rel="Chapter" href="Star.html">
<link title="Strelka" rel="Chapter" href="Strelka.html">
<link title="Stringtie" rel="Chapter" href="Stringtie.html">
<link title="Varscan" rel="Chapter" href="Varscan.html">
<link title="Vcftools" rel="Chapter" href="Vcftools.html">
<link title="Virmid" rel="Chapter" href="Virmid.html">
<link title="Workflow_utilities" rel="Chapter" href="Workflow_utilities.html"><title>Common.KEDSL</title>
</head>
<body>
<code class="code"><span class="keyword">struct</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">include</span>&nbsp;<span class="constructor">Ketrew</span>.<span class="constructor">EDSL</span><br>
&nbsp;&nbsp;<span class="keyword">module</span>&nbsp;<span class="constructor">Command</span>&nbsp;=&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Command</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;<span class="keywordsign">'</span>product&nbsp;workflow_node&nbsp;=&nbsp;&lt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;product&nbsp;:&nbsp;<span class="keywordsign">'</span>product;<br>
&nbsp;&nbsp;&nbsp;&nbsp;target:&nbsp;user_target;<br>
&nbsp;&nbsp;&gt;&nbsp;<span class="keyword">constraint</span>&nbsp;<span class="keywordsign">'</span>product&nbsp;=&nbsp;&lt;&nbsp;is_done&nbsp;:&nbsp;<span class="constructor">Condition</span>.t&nbsp;option&nbsp;;&nbsp;..&nbsp;&gt;<br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;workflow_edge&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">Depends_on</span>:&nbsp;<span class="keywordsign">'</span>a&nbsp;workflow_node&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;workflow_edge<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">On_success_activate</span>:&nbsp;_&nbsp;workflow_node&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;workflow_edge<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">On_failure_activate</span>:&nbsp;_&nbsp;workflow_node&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;workflow_edge<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">Empty_edge</span>:&nbsp;workflow_edge<br>
<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;depends_on&nbsp;l&nbsp;=&nbsp;&nbsp;<span class="constructor">Depends_on</span>&nbsp;l<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;on_success_activate&nbsp;n&nbsp;=&nbsp;<span class="constructor">On_success_activate</span>&nbsp;n<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;on_failure_activate&nbsp;n&nbsp;=&nbsp;<span class="constructor">On_failure_activate</span>&nbsp;n<br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;nothing&nbsp;=&nbsp;&lt;&nbsp;is_done&nbsp;:&nbsp;<span class="constructor">Condition</span>.t&nbsp;option&nbsp;&gt;<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;nothing&nbsp;&nbsp;=&nbsp;<span class="keyword">object</span>&nbsp;<span class="keyword">method</span>&nbsp;is_done&nbsp;=&nbsp;<span class="constructor">None</span>&nbsp;<span class="keyword">end</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;workflow_node<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?active<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?make&nbsp;?done_when&nbsp;?metadata<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?equivalence<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?(tags=[])&nbsp;?name&nbsp;?(edges=[])<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(product:&nbsp;<span class="keywordsign">'</span>product)&nbsp;:&nbsp;<span class="keywordsign">'</span>product&nbsp;workflow_node&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;user_target&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;done_when&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">match</span>&nbsp;done_when&nbsp;<span class="keyword">with</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">Some</span>&nbsp;s&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Some</span>&nbsp;s<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">None</span>&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;product<span class="keywordsign">#</span>is_done<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;depends_on&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">List</span>.filter_map&nbsp;edges&nbsp;~f:(<span class="keyword">function</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">Depends_on</span>&nbsp;we&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Some</span>&nbsp;we<span class="keywordsign">#</span>target<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;_&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">None</span>)&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;on_success_activate&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">List</span>.filter_map&nbsp;edges&nbsp;~f:(<span class="keyword">function</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">On_success_activate</span>&nbsp;we&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Some</span>&nbsp;we<span class="keywordsign">#</span>target<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;_&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">None</span>)&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;on_failure_activate&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">List</span>.filter_map&nbsp;edges&nbsp;~f:(<span class="keyword">function</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">On_failure_activate</span>&nbsp;we&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Some</span>&nbsp;we<span class="keywordsign">#</span>target<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;_&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">None</span>)&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;actual_name&nbsp;=&nbsp;<span class="constructor">Option</span>.value&nbsp;name&nbsp;~default:<span class="string">"Biokepi"</span>&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tags&nbsp;=&nbsp;<span class="string">"biokepi"</span>&nbsp;::&nbsp;tags&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual_name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?equivalence&nbsp;~tags<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~on_success_activate&nbsp;~on_failure_activate&nbsp;~depends_on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?active&nbsp;?make&nbsp;?metadata&nbsp;?done_when<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">object</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;product&nbsp;=&nbsp;product<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;target&nbsp;=&nbsp;user_target<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
<br>
<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;target&nbsp;_&nbsp;=&nbsp;<span class="keywordsign">`</span><span class="constructor">Please_KEDSL_workflow</span><br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;file_target&nbsp;_&nbsp;=&nbsp;<span class="keywordsign">`</span><span class="constructor">Please_KEDSL_workflow</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;single_file&nbsp;=&nbsp;&lt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;exists:&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Condition</span>.t;<br>
&nbsp;&nbsp;&nbsp;&nbsp;is_done:&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Condition</span>.t&nbsp;option;<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;:&nbsp;string;<br>
&nbsp;&nbsp;&nbsp;&nbsp;is_bigger_than:&nbsp;int&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Condition</span>.t;<br>
&nbsp;&nbsp;&gt;<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;single_file&nbsp;?(host=&nbsp;<span class="constructor">Host</span>.tmp_on_localhost)&nbsp;path&nbsp;:&nbsp;single_file&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;basename&nbsp;=&nbsp;<span class="constructor">Filename</span>.basename&nbsp;path&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">object</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;vol&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Volume</span>.(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create&nbsp;~host<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~root:(<span class="constructor">Ketrew_pure</span>.<span class="constructor">Path</span>.absolute_directory_exn&nbsp;(<span class="constructor">Filename</span>.dirname&nbsp;path))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(file&nbsp;basename))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;path&nbsp;=&nbsp;path<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;exists&nbsp;=&nbsp;<span class="keywordsign">`</span><span class="constructor">Volume_exists</span>&nbsp;vol<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;is_done&nbsp;=&nbsp;<span class="constructor">Some</span>&nbsp;(<span class="keywordsign">`</span><span class="constructor">Volume_exists</span>&nbsp;vol)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;is_bigger_than&nbsp;n&nbsp;=&nbsp;<span class="keywordsign">`</span><span class="constructor">Volume_size_bigger_than</span>&nbsp;(vol,&nbsp;n)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;forget_product&nbsp;node&nbsp;:&nbsp;nothing&nbsp;workflow_node&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">object</span>&nbsp;<span class="keyword">method</span>&nbsp;product&nbsp;=&nbsp;nothing&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;target&nbsp;=&nbsp;node<span class="keywordsign">#</span>target&nbsp;<span class="keyword">end</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;file_workflow&nbsp;=&nbsp;single_file&nbsp;workflow_node<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;phony_workflow&nbsp;=&nbsp;nothing&nbsp;workflow_node<br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;list_of_files&nbsp;=&nbsp;&lt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;is_done:&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Condition</span>.t&nbsp;option;<br>
&nbsp;&nbsp;&nbsp;&nbsp;paths&nbsp;:&nbsp;string&nbsp;list;<br>
&nbsp;&nbsp;&gt;<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;list_of_files&nbsp;?host&nbsp;paths&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">object</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;files&nbsp;=&nbsp;<span class="constructor">List</span>.map&nbsp;paths&nbsp;~f:(<span class="keyword">fun</span>&nbsp;p&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;single_file&nbsp;?host&nbsp;p)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;is_done&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Some</span>&nbsp;(<span class="keywordsign">`</span><span class="constructor">And</span>&nbsp;(<span class="constructor">List</span>.filter_map&nbsp;files&nbsp;~f:(<span class="keyword">fun</span>&nbsp;f&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;f<span class="keywordsign">#</span>is_done)))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;paths&nbsp;=&nbsp;paths<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
<br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;fastq_reads&nbsp;=&nbsp;&lt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;is_done:&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Condition</span>.t&nbsp;option;<br>
&nbsp;&nbsp;&nbsp;&nbsp;paths&nbsp;:&nbsp;string&nbsp;*&nbsp;(string&nbsp;option);<br>
&nbsp;&nbsp;&gt;<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;fastq_reads&nbsp;?host&nbsp;r1&nbsp;r2_opt&nbsp;:&nbsp;fastq_reads&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">object</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;r1_file&nbsp;=&nbsp;single_file&nbsp;?host&nbsp;r1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;r2_file_opt&nbsp;=&nbsp;<span class="constructor">Option</span>.map&nbsp;r2_opt&nbsp;~f:(single_file&nbsp;?host)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;paths&nbsp;=&nbsp;(r1,&nbsp;r2_opt)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;is_done&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Some</span>&nbsp;(<span class="keyword">match</span>&nbsp;r2_file_opt&nbsp;<span class="keyword">with</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">Some</span>&nbsp;r2&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">`</span><span class="constructor">And</span>&nbsp;[r1_file<span class="keywordsign">#</span>exists;&nbsp;r2<span class="keywordsign">#</span>exists]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="constructor">None</span>&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;<span class="keywordsign">`</span><span class="constructor">And</span>&nbsp;[r1_file<span class="keywordsign">#</span>exists;&nbsp;r1_file<span class="keywordsign">#</span>exists;])<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
<br>
&nbsp;&nbsp;<span class="keyword">type</span>&nbsp;bam_file&nbsp;=&nbsp;&lt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;is_done:&nbsp;<span class="constructor">Ketrew_pure</span>.<span class="constructor">Target</span>.<span class="constructor">Condition</span>.t&nbsp;option;<br>
&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;:&nbsp;string;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sorting:&nbsp;[&nbsp;<span class="keywordsign">`</span><span class="constructor">Coordinate</span>&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="keywordsign">`</span><span class="constructor">Read_name</span>&nbsp;]&nbsp;option;<br>
&nbsp;&nbsp;&nbsp;&nbsp;content_type:&nbsp;[&nbsp;<span class="keywordsign">`</span><span class="constructor">DNA</span>&nbsp;<span class="keywordsign">|</span>&nbsp;<span class="keywordsign">`</span><span class="constructor">RNA</span>&nbsp;];<br>
&nbsp;&nbsp;&gt;<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;bam_file&nbsp;?host&nbsp;?sorting&nbsp;?(contains=<span class="keywordsign">`</span><span class="constructor">DNA</span>)&nbsp;path&nbsp;:&nbsp;bam_file&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">object</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;file&nbsp;=&nbsp;single_file&nbsp;?host&nbsp;path<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;path&nbsp;=&nbsp;file<span class="keywordsign">#</span>path<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;is_done&nbsp;=&nbsp;file<span class="keywordsign">#</span>is_done<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;sorting&nbsp;=&nbsp;sorting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">method</span>&nbsp;content_type&nbsp;=&nbsp;contains<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
<br>
<br>
&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;submit&nbsp;w&nbsp;=&nbsp;<span class="constructor">Ketrew</span>.<span class="constructor">Client</span>.submit&nbsp;w<span class="keywordsign">#</span>target<br>
<br>
<span class="keyword">end</span></code></body></html>